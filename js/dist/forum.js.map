{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@xypp/flarum-websocket-notification/./src/common/Data/ModelPath.ts","webpack://@xypp/flarum-websocket-notification/./src/common/extend.ts","webpack://@xypp/flarum-websocket-notification/./src/common/helper/WebsocketHelper.ts","webpack://@xypp/flarum-websocket-notification/./src/common/model/WebsocketAccessToken.ts","webpack://@xypp/flarum-websocket-notification/./src/common/util/NodeUtil.ts","webpack://@xypp/flarum-websocket-notification/./src/common/util/frontend.ts","webpack://@xypp/flarum-websocket-notification/./src/forum/index.ts","webpack://@xypp/flarum-websocket-notification/./src/forum/integration/components/ComingDiscussion.tsx","webpack://@xypp/flarum-websocket-notification/./src/forum/integration/components/NotificationFloater.tsx","webpack://@xypp/flarum-websocket-notification/./src/forum/integration/discussionList.ts","webpack://@xypp/flarum-websocket-notification/./src/forum/integration/index.ts","webpack://@xypp/flarum-websocket-notification/./src/forum/integration/notification.tsx","webpack://@xypp/flarum-websocket-notification/./src/forum/integration/post.ts","webpack://@xypp/flarum-websocket-notification/external root \"flarum.core.compat['common/Component']\"","webpack://@xypp/flarum-websocket-notification/external root \"flarum.core.compat['common/Model']\"","webpack://@xypp/flarum-websocket-notification/external root \"flarum.core.compat['common/components/Button']\"","webpack://@xypp/flarum-websocket-notification/external root \"flarum.core.compat['common/components/FieldSet']\"","webpack://@xypp/flarum-websocket-notification/external root \"flarum.core.compat['common/components/Link']\"","webpack://@xypp/flarum-websocket-notification/external root \"flarum.core.compat['common/components/Select']\"","webpack://@xypp/flarum-websocket-notification/external root \"flarum.core.compat['common/extend']\"","webpack://@xypp/flarum-websocket-notification/external root \"flarum.core.compat['common/extenders']\"","webpack://@xypp/flarum-websocket-notification/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@xypp/flarum-websocket-notification/external root \"flarum.core.compat['forum/app']\"","webpack://@xypp/flarum-websocket-notification/external root \"flarum.core.compat['forum/components/DiscussionList']\"","webpack://@xypp/flarum-websocket-notification/external root \"flarum.core.compat['forum/components/DiscussionPage']\"","webpack://@xypp/flarum-websocket-notification/external root \"flarum.core.compat['forum/components/SettingsPage']\"","webpack://@xypp/flarum-websocket-notification/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://@xypp/flarum-websocket-notification/./node_modules/@babel/runtime/helpers/typeof.js","webpack://@xypp/flarum-websocket-notification/./node_modules/@babel/runtime/regenerator/index.js","webpack://@xypp/flarum-websocket-notification/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@xypp/flarum-websocket-notification/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@xypp/flarum-websocket-notification/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@xypp/flarum-websocket-notification/webpack/bootstrap","webpack://@xypp/flarum-websocket-notification/webpack/runtime/compat get default export","webpack://@xypp/flarum-websocket-notification/webpack/runtime/define property getters","webpack://@xypp/flarum-websocket-notification/webpack/runtime/hasOwnProperty shorthand","webpack://@xypp/flarum-websocket-notification/webpack/runtime/make namespace object","webpack://@xypp/flarum-websocket-notification/./forum.ts"],"sourcesContent":["type ModelPathNode = {\r\n    id?: string;\r\n    name: string;\r\n}\r\nexport class ModelPath {\r\n    nodes: ModelPathNode[];\r\n    data: any;\r\n    constructor(str?: string) {\r\n        if (str) {\r\n            if (str.endsWith(\"}\")) {\r\n                const t = str.split('||');\r\n                this.data = JSON.parse(t[1]);\r\n                str = t[0];\r\n            }\r\n            this.nodes = str.split('.').map(n => {\r\n                const ret: ModelPathNode = { name: n };\r\n                if (n.includes('[')) {\r\n                    const [name, id] = n.split('[');\r\n                    ret.id = id.substring(0, id.length - 1);\r\n                    ret.name = name;\r\n                }\r\n                return ret;\r\n            });\r\n        } else {\r\n            this.nodes = [];\r\n        }\r\n    }\r\n    toString(): string {\r\n        return this.nodes.map(n => n.id ? `${n.name}[${n.id}]` : n.name).join('.');\r\n    }\r\n    add(name: string, id?: string): this {\r\n        this.nodes.push({ name, id });\r\n        return this;\r\n    }\r\n    get(name?: string): ModelPathNode | null {\r\n        if (!name) return this.nodes[this.nodes.length - 1] || null;\r\n        return this.nodes.find(n => n.name === name) || null;\r\n    }\r\n    getId(name?: string): string | null {\r\n        const node = this.get(name);\r\n        return node && (node.id || null);\r\n    }\r\n    getData(): any {\r\n        return this.data;\r\n    }\r\n}","import Extend from 'flarum/common/extenders';\r\nimport WebsocketAccessToken from './model/WebsocketAccessToken';\r\nexport default [\r\n    new Extend.Store()\r\n        .add('websocket-access-token', WebsocketAccessToken)\r\n];","import AdminApplication from \"flarum/admin/AdminApplication\";\r\nimport ItemList from \"flarum/common/utils/ItemList\";\r\nimport ForumApplication from \"flarum/forum/ForumApplication\";\r\nimport { ModelPath } from \"../Data/ModelPath\";\r\nimport WebsocketAccessToken from \"../model/WebsocketAccessToken\";\r\n\r\nexport class WebsocketHelper {\r\n    app?: ForumApplication | AdminApplication;\r\n    ws?: WebSocket\r\n    context: Record<string, any> = {};\r\n    lastSubscribes: string[] = [];\r\n    static instance?: WebsocketHelper;\r\n    public static getInstance(): WebsocketHelper {\r\n        if (!WebsocketHelper.instance) {\r\n            WebsocketHelper.instance = new WebsocketHelper();\r\n        }\r\n        return WebsocketHelper.instance;\r\n    }\r\n    init(app: ForumApplication | AdminApplication) {\r\n        this.app = app;\r\n    }\r\n    async start() {\r\n        if (this.app) {\r\n            if (this.ws) {\r\n                try {\r\n                    this.ws.onclose = () => { }\r\n                    this.ws.close();\r\n                } finally {\r\n                    this.ws = undefined;\r\n                };\r\n            }\r\n            const item = await this.app.store.createRecord<WebsocketAccessToken>(\"websocket-access-token\").save({});\r\n            const ws = new WebSocket(item.url());\r\n            this.ws = ws;\r\n            ws.onclose = () => {\r\n                this.closeHandler();\r\n            }\r\n            ws.onopen = () => {\r\n                this.lastSubscribes = [];\r\n                this.reSubscribe();\r\n            }\r\n            ws.onmessage = (e) => {\r\n                const data = JSON.parse(e.data);\r\n                if (data.type === \"sync\")\r\n                    this.messageHandler(new ModelPath(data.path), data.data);\r\n            }\r\n        }\r\n    }\r\n    messageHandler(path: ModelPath, data: any) {\r\n        // To be implemented in extends\r\n        console.log(`No handler found ${path.toString()}: ${JSON.stringify(data)}`);\r\n    }\r\n    closeHandler() {\r\n        setTimeout(() => {\r\n            this.start();\r\n        }, 5000);\r\n    }\r\n    getSubscribes(context: Record<string, any>): ItemList<ModelPath> {\r\n        return new ItemList<ModelPath>();\r\n    }\r\n    setContext(context: Record<string, any>) {\r\n        Object.keys(context).forEach(v => {\r\n            if (context[v] === null && this.context[v]) delete this.context[v];\r\n            else this.context[v] = context[v];\r\n        });\r\n        return this;\r\n    }\r\n    reSubscribe(tempContext?: Record<string, any>) {\r\n        const newSub = this.getSubscribes(Object.assign(tempContext || {}, this.context)).toArray().map(v => v.toString());\r\n        console.log(`ReSubscribe: ${newSub.join(\", \")}`);\r\n        if (!this.changed(newSub)) return;\r\n        this.lastSubscribes = newSub;\r\n        this.send({\r\n            type: \"subscribe\",\r\n            path: newSub\r\n        });\r\n        return this;\r\n    }\r\n    send(data: { type: string, [key: string]: any }) {\r\n        if (this.ws) {\r\n            this.ws.send(JSON.stringify(data));\r\n        }\r\n    }\r\n    protected changed(newSub: string[]): boolean {\r\n        newSub.sort((a, b) => a.localeCompare(b));\r\n        if (newSub.length !== this.lastSubscribes.length) return true;\r\n        for (let i = 0; i < newSub.length; i++) {\r\n            if (newSub[i] !== this.lastSubscribes[i]) return true;\r\n        }\r\n        return false;\r\n    }\r\n}","import Model from 'flarum/common/Model';\n\nexport default class WebsocketAccessToken extends Model {\n  token = Model.attribute<string>('token');\n  url = Model.attribute<string>('url', (url?: any) => url && url.replace(\"0.0.0.0\", location.hostname));\n}","export function showIf(judgement: boolean, vnode: any, def?: any) {\n    return judgement ? vnode : (def || \"\");\n}","import ItemList from \"flarum/common/utils/ItemList\";\r\nimport { ModelPath } from \"../Data/ModelPath\";\r\nimport { extend, override } from \"flarum/common/extend\"\r\nimport { WebsocketHelper } from \"../helper/WebsocketHelper\";\r\nexport function addSubscribeCb(name: string, cb: (items: ItemList<ModelPath>, context: Record<string, any>) => void) {\r\n    extend(WebsocketHelper.prototype, \"getSubscribes\", cb);\r\n}\r\nexport function addMessageCb(name: string, cb: (path: ModelPath, data: any) => void) {\r\n    override(WebsocketHelper.prototype, \"messageHandler\", function (orig: (path: ModelPath, data: any) => void, path: ModelPath, data: any) {\r\n        if (path.get()?.name == name) {\r\n            return cb(path, data);\r\n        }\r\n        orig(path, data);\r\n    });\r\n}\r\n","import app from 'flarum/forum/app';\nimport WebsocketAccessToken from '../common/model/WebsocketAccessToken';\nimport { WebsocketHelper } from '../common/helper/WebsocketHelper';\nimport init from './integration';\nimport PageState from 'flarum/common/states/PageState';\nimport { extend } from 'flarum/common/extend';\n\napp.initializers.add('xypp/flarum-websocket-notification', () => {\n  WebsocketHelper.getInstance().init(app);\n  init();\n  setTimeout(() => {\n    WebsocketHelper.getInstance().start();\n  }, 1000);\n  (window as any).navigation.addEventListener(\"navigate\", (event: any) => {\n    WebsocketHelper.getInstance().reSubscribe();\n  });\n});\n\n","import Component from \"flarum/common/Component\";\r\nimport Discussion from \"flarum/common/models/Discussion\";\r\nimport app from \"flarum/forum/app\";\r\nimport Button from \"flarum/common/components/Button\";\r\nimport Link from \"flarum/common/components/Link\"\r\nexport default class ComingDiscussion extends Component<{\r\n    list: {\r\n        title: string,\r\n        id: string,\r\n        count: number,\r\n        post: number\r\n    }[],\r\n    cb: () => void\r\n}> {\r\n    view(vnode: any) {\r\n        return <div className=\"ComingDiscussion\">\r\n            <div className=\"ComingDiscussion-icon\">\r\n                <i className=\"fas fa-star-of-life\"></i>\r\n                <div className=\"ComingDiscussion-icon-text\">\r\n                    {app.translator.trans('xypp-websocket-notification.forum.new_discussion')}\r\n                </div>\r\n            </div>\r\n            <div className=\"ComingDiscussion-item-container\">\r\n                {\r\n                    this.attrs.list.map(item => {\r\n                        return <div class=\"ComingDiscussion-item\">\r\n                            <span className=\"ComingDiscussion-count\">{item.count}</span>\r\n                            <Link className=\"ComingDiscussion-link\" href={app.route(\"discussion.near\", {\r\n                                id: item.id,\r\n                                near: item.post\r\n                            })}>{item.title}</Link>\r\n                        </div>\r\n                    })\r\n                }\r\n            </div>\r\n            <div className=\"ComingDiscussion-Reload\">\r\n                <Button class=\"Button\" onclick={this.attrs.cb}><i className=\"fas fa-sync\"></i></Button>\r\n            </div>\r\n        </div>\r\n    }\r\n}","import Component from \"flarum/common/Component\";\r\nimport app from \"flarum/forum/app\";\r\nimport { showIf } from \"../../../common/util/NodeUtil\";\r\nimport Button from \"flarum/common/components/Button\"\r\n\r\nexport default class NotificationFloater extends Component<{\r\n    notifications: { time: number, first: boolean, notification: any }[],\r\n    dismiss: () => void\r\n}> {\r\n    view(vnode: any) {\r\n        const position = (app.session?.user?.preferences() || {})[\"xyppWsn-floater-position\"] || \"center\";\r\n        return <div className={showIf(this.attrs.notifications.length > 0, \"notification-floater\", \"notification-floater hidden\") + \" \" + position}>\r\n            {this.attrs.notifications.map(n => {\r\n                const type = n.notification.data.attributes.contentType;\r\n                const cls = app.notificationComponents[type];\r\n                return <div className={showIf(n.first, \"notification-floater-item in\", \"notification-floater-item\")}>\r\n                    {showIf(!!cls, m(cls, { notification: n.notification }), <div>{type}</div>)}\r\n                </div>\r\n            })}\r\n            <div className=\"notification-floater-close-container\">\r\n                <Button className=\"Button Button-primary\" onclick={this.attrs.dismiss}>\r\n                    <i className=\"fas fa-times\"></i>\r\n                    {app.translator.trans(\"xypp-websocket-notification.forum.close_notification_floater\")}\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    }\r\n}","import ItemList from \"flarum/common/utils/ItemList\";\r\nimport { addMessageCb, addSubscribeCb } from \"../../common/util/frontend\";\r\nimport { ModelPath } from \"../../common/Data/ModelPath\";\r\nimport app from \"flarum/forum/app\";\r\nimport DiscussionPage from \"flarum/forum/components/DiscussionPage\"\r\nimport { extend } from \"flarum/common/extend\";\r\nimport { WebsocketHelper } from \"../../common/helper/WebsocketHelper\";\r\nimport DiscussionList from \"flarum/forum/components/DiscussionList\"\r\nimport ComingDiscussion from \"./components/ComingDiscussion\";\r\nexport function initDiscussionList() {\r\n    addSubscribeCb(\"discussion\", (items: ItemList<ModelPath>, context: Record<string, any>) => {\r\n        if (context.discussionList) {\r\n            items.add(\"discussion\", new ModelPath().add(\"discussion\", context.discussion));\r\n        }\r\n    })\r\n    let comingDiscussions: {\r\n        title: string;\r\n        post: number;\r\n        id: string;\r\n        count: number;\r\n    }[] = [];\r\n\r\n    function clearAll() {\r\n        comingDiscussions = [];\r\n        m.redraw();\r\n    }\r\n    function addOne(id: string, title: string, post: number) {\r\n        let baseCount = 0;\r\n        for (let i = 0; i < comingDiscussions.length; i++) {\r\n            if (comingDiscussions[i].id == id) {\r\n                baseCount = comingDiscussions[i].count;\r\n                comingDiscussions.splice(i, 1);\r\n                break;\r\n            }\r\n        }\r\n        comingDiscussions.unshift({\r\n            title: title,\r\n            post: post,\r\n            id: id,\r\n            count: baseCount + 1\r\n        });\r\n        if (comingDiscussions.length > 5) {\r\n            comingDiscussions.pop();\r\n        }\r\n    }\r\n\r\n    addMessageCb(\"discussion\", (path: ModelPath, data: any) => {\r\n        addOne(data.id, data.title, data.post);\r\n        m.redraw();\r\n    });\r\n\r\n\r\n\r\n    extend(DiscussionList.prototype, \"view\", function (this: DiscussionList, vnode: any) {\r\n        if (comingDiscussions.length && vnode && vnode.children && Array.isArray(vnode.children)) {\r\n            vnode.children.unshift(ComingDiscussion.component({\r\n                list: comingDiscussions,\r\n                cb: (() => {\r\n                    (this.attrs as any).state.refresh().then(clearAll);\r\n                }).bind(this)\r\n            }));\r\n        }\r\n    })\r\n    extend(DiscussionList.prototype, \"oncreate\", () => {\r\n        WebsocketHelper.getInstance().setContext({\r\n            discussionList: true\r\n        }).reSubscribe();\r\n    })\r\n    extend(DiscussionList.prototype, \"onbeforeremove\", () => {\r\n        WebsocketHelper.getInstance().setContext({\r\n            discussionList: null\r\n        }).reSubscribe();\r\n    })\r\n}","import app from \"flarum/forum/app\";\r\nimport { initNotification } from \"./notification\";\r\nimport { initPost } from \"./post\";\r\nimport { initDiscussionList } from \"./discussionList\";\r\n\r\nexport default function init() {\r\n    initNotification();\r\n    initPost();\r\n    initDiscussionList();\r\n}","import app from \"flarum/forum/app\";\r\nimport { addMessageCb, addSubscribeCb } from \"../../common/util/frontend\";\r\nimport { ModelPath } from \"../../common/Data/ModelPath\";\r\nimport NotificationFloater from \"./components/NotificationFloater\";\r\nimport { extend } from \"flarum/common/extend\";\r\nimport SettingsPage from \"flarum/forum/components/SettingsPage\";\r\nimport FieldSet from \"flarum/common/components/FieldSet\"\r\nimport Select from \"flarum/common/components/Select\";\r\nexport function initNotification() {\r\n  let notifications: { time: number, first: boolean, notification: any }[] = [];\r\n  addSubscribeCb('websocket', (items) => {\r\n    if (app.session.user)\r\n      items.add(\"notification\", new ModelPath().add(\"notification\", app.session.user.id()));\r\n  });\r\n  addMessageCb('notification', (path, data) => {\r\n    const model = app.store.pushPayload(data);\r\n    const obj = { time: 8, first: false, notification: model };\r\n    notifications.unshift(obj);\r\n    if (app.session.user)\r\n      app.session.user.pushAttributes({\r\n        unreadNotificationCount: app.session.user.unreadNotificationCount() ?? 0 + 1,\r\n        newNotificationCount: app.session.user.newNotificationCount() ?? 0 + 1,\r\n      });\r\n    m.redraw();\r\n    setTimeout(() => {\r\n      obj.first = true;\r\n      m.redraw();\r\n    }, 100);\r\n  });\r\n  function dismiss() {\r\n    while (notifications.length) {\r\n      notifications.pop();\r\n    }\r\n  }\r\n\r\n  const ctr = $(\"<div></div>\").addClass(\"notification-floater-container\")\r\n  ctr.appendTo(document.body);\r\n  m.mount(ctr[0], { view: function () { return NotificationFloater.component({ notifications, dismiss }) } });\r\n\r\n  setInterval(() => {\r\n    notifications.forEach(element => {\r\n      element.time--;\r\n    });\r\n    let changed = false;\r\n    for (let i = notifications.length - 1; i >= 0; i--) {\r\n      if (notifications[i].time <= 0) {\r\n        notifications.splice(i, 1);\r\n        changed = true;\r\n      }\r\n    }\r\n    if (changed)\r\n      m.redraw();\r\n  }, 1000);\r\n\r\n  const SELECT_FLOATER = {\r\n    \"left\": app.translator.trans(\"xypp-websocket-notification.forum.notification_floater.left\"),\r\n    \"right\": app.translator.trans(\"xypp-websocket-notification.forum.notification_floater.right\"),\r\n    \"center\": app.translator.trans(\"xypp-websocket-notification.forum.notification_floater.center\")\r\n  }\r\n  extend(SettingsPage.prototype, 'settingsItems', function (items) {\r\n    const position = (app.session?.user?.preferences() || {})[\"xyppWsn-floater-position\"] || \"center\";\r\n    items.add(\r\n      'xypp-wsn-floater-position',\r\n      <FieldSet label={app.translator.trans(\"xypp-websocket-notification.forum.notification_floater.title\")} className=\"Settings-floater\">\r\n        <p>{app.translator.trans(\"xypp-websocket-notification.forum.notification_floater.desc\")}</p>\r\n        <Select\r\n          options={SELECT_FLOATER}\r\n          value={position}\r\n          onchange={(value: string) => {\r\n            app.session.user!\r\n              .savePreferences({\r\n                \"xyppWsn-floater-position\": value\r\n              });\r\n          }}\r\n        />\r\n      </FieldSet>\r\n    );\r\n  })\r\n}","import ItemList from \"flarum/common/utils/ItemList\";\r\nimport { addMessageCb, addSubscribeCb } from \"../../common/util/frontend\";\r\nimport { ModelPath } from \"../../common/Data/ModelPath\";\r\nimport app from \"flarum/forum/app\";\r\nimport Post from \"flarum/common/models/Post\";\r\nimport Discussion from \"flarum/common/models/Discussion\";\r\nimport PostStreamState from \"flarum/forum/states/PostStreamState\"\r\nimport DiscussionPage from \"flarum/forum/components/DiscussionPage\"\r\nimport { extend } from \"flarum/common/extend\";\r\nimport { WebsocketHelper } from \"../../common/helper/WebsocketHelper\";\r\nimport PageState from \"flarum/common/states/PageState\";\r\nexport function initPost() {\r\n    addSubscribeCb(\"post\", (items: ItemList<ModelPath>, context: Record<string, any>) => {\r\n        if (context.discussion) {\r\n            items.add(\"discussion\", new ModelPath().add(\"discussion\", context.discussion).add(\"post\"));\r\n        }\r\n    })\r\n    addMessageCb(\"post\", (path: ModelPath, data: any) => {\r\n        const route = ((app.current.data as any) ?? {}).routeName;\r\n        if (route !== \"discussion\" && route !== \"discussion.near\") return;\r\n        const discussion: Discussion = (app.current.data as any).discussion;\r\n        const stream: PostStreamState = app.current.get(\"stream\");\r\n        if (discussion.id() == path.getId(\"discussion\") && stream.viewingEnd()) {\r\n            const model = app.store.pushPayload<Post>(data);\r\n            if (!((discussion.data as any).relationships.posts.data.find((v: any) => v.id == model.id()))) {\r\n                (discussion.data as any).relationships.posts.data.push({ type: 'posts', id: model.id() });\r\n                stream.loadNext();\r\n            } else {\r\n                m.redraw();\r\n            }\r\n        }\r\n    });\r\n    extend(DiscussionPage.prototype, \"show\", function (this: DiscussionPage, r: any, discussion: Discussion) {\r\n        if (discussion)\r\n            WebsocketHelper.getInstance().setContext({\r\n                discussion: discussion!.id()\r\n            }).reSubscribe();\r\n    })\r\n    extend(DiscussionPage.prototype, \"onbeforeremove\", function (this: DiscussionPage) {\r\n        WebsocketHelper.getInstance().setContext({\r\n            discussion: null\r\n        }).reSubscribe();\r\n    })\r\n}\r\n","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/Model'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/FieldSet'];","module.exports = flarum.core.compat['common/components/Link'];","module.exports = flarum.core.compat['common/components/Select'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/extenders'];","module.exports = flarum.core.compat['common/utils/ItemList'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/DiscussionList'];","module.exports = flarum.core.compat['forum/components/DiscussionPage'];","module.exports = flarum.core.compat['forum/components/SettingsPage'];","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return e;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var t,\n    e = {},\n    r = Object.prototype,\n    n = r.hasOwnProperty,\n    o = Object.defineProperty || function (t, e, r) {\n      t[e] = r.value;\n    },\n    i = \"function\" == typeof Symbol ? Symbol : {},\n    a = i.iterator || \"@@iterator\",\n    c = i.asyncIterator || \"@@asyncIterator\",\n    u = i.toStringTag || \"@@toStringTag\";\n  function define(t, e, r) {\n    return Object.defineProperty(t, e, {\n      value: r,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), t[e];\n  }\n  try {\n    define({}, \"\");\n  } catch (t) {\n    define = function define(t, e, r) {\n      return t[e] = r;\n    };\n  }\n  function wrap(t, e, r, n) {\n    var i = e && e.prototype instanceof Generator ? e : Generator,\n      a = Object.create(i.prototype),\n      c = new Context(n || []);\n    return o(a, \"_invoke\", {\n      value: makeInvokeMethod(t, r, c)\n    }), a;\n  }\n  function tryCatch(t, e, r) {\n    try {\n      return {\n        type: \"normal\",\n        arg: t.call(e, r)\n      };\n    } catch (t) {\n      return {\n        type: \"throw\",\n        arg: t\n      };\n    }\n  }\n  e.wrap = wrap;\n  var h = \"suspendedStart\",\n    l = \"suspendedYield\",\n    f = \"executing\",\n    s = \"completed\",\n    y = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var p = {};\n  define(p, a, function () {\n    return this;\n  });\n  var d = Object.getPrototypeOf,\n    v = d && d(d(values([])));\n  v && v !== r && n.call(v, a) && (p = v);\n  var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);\n  function defineIteratorMethods(t) {\n    [\"next\", \"throw\", \"return\"].forEach(function (e) {\n      define(t, e, function (t) {\n        return this._invoke(e, t);\n      });\n    });\n  }\n  function AsyncIterator(t, e) {\n    function invoke(r, o, i, a) {\n      var c = tryCatch(t[r], t, o);\n      if (\"throw\" !== c.type) {\n        var u = c.arg,\n          h = u.value;\n        return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) {\n          invoke(\"next\", t, i, a);\n        }, function (t) {\n          invoke(\"throw\", t, i, a);\n        }) : e.resolve(h).then(function (t) {\n          u.value = t, i(u);\n        }, function (t) {\n          return invoke(\"throw\", t, i, a);\n        });\n      }\n      a(c.arg);\n    }\n    var r;\n    o(this, \"_invoke\", {\n      value: function value(t, n) {\n        function callInvokeWithMethodAndArg() {\n          return new e(function (e, r) {\n            invoke(t, n, e, r);\n          });\n        }\n        return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(e, r, n) {\n    var o = h;\n    return function (i, a) {\n      if (o === f) throw Error(\"Generator is already running\");\n      if (o === s) {\n        if (\"throw\" === i) throw a;\n        return {\n          value: t,\n          done: !0\n        };\n      }\n      for (n.method = i, n.arg = a;;) {\n        var c = n.delegate;\n        if (c) {\n          var u = maybeInvokeDelegate(c, n);\n          if (u) {\n            if (u === y) continue;\n            return u;\n          }\n        }\n        if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) {\n          if (o === h) throw o = s, n.arg;\n          n.dispatchException(n.arg);\n        } else \"return\" === n.method && n.abrupt(\"return\", n.arg);\n        o = f;\n        var p = tryCatch(e, r, n);\n        if (\"normal\" === p.type) {\n          if (o = n.done ? s : l, p.arg === y) continue;\n          return {\n            value: p.arg,\n            done: n.done\n          };\n        }\n        \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(e, r) {\n    var n = r.method,\n      o = e.iterator[n];\n    if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y;\n    var i = tryCatch(o, e.iterator, r.arg);\n    if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y;\n    var a = i.arg;\n    return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y);\n  }\n  function pushTryEntry(t) {\n    var e = {\n      tryLoc: t[0]\n    };\n    1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);\n  }\n  function resetTryEntry(t) {\n    var e = t.completion || {};\n    e.type = \"normal\", delete e.arg, t.completion = e;\n  }\n  function Context(t) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], t.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(e) {\n    if (e || \"\" === e) {\n      var r = e[a];\n      if (r) return r.call(e);\n      if (\"function\" == typeof e.next) return e;\n      if (!isNaN(e.length)) {\n        var o = -1,\n          i = function next() {\n            for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;\n            return next.value = t, next.done = !0, next;\n          };\n        return i.next = i;\n      }\n    }\n    throw new TypeError(_typeof(e) + \" is not iterable\");\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), o(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) {\n    var e = \"function\" == typeof t && t.constructor;\n    return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name));\n  }, e.mark = function (t) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t;\n  }, e.awrap = function (t) {\n    return {\n      __await: t\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {\n    return this;\n  }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {\n    void 0 === i && (i = Promise);\n    var a = new AsyncIterator(wrap(t, r, n, o), i);\n    return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {\n      return t.done ? t.value : a.next();\n    });\n  }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () {\n    return this;\n  }), define(g, \"toString\", function () {\n    return \"[object Generator]\";\n  }), e.keys = function (t) {\n    var e = Object(t),\n      r = [];\n    for (var n in e) r.push(n);\n    return r.reverse(), function next() {\n      for (; r.length;) {\n        var t = r.pop();\n        if (t in e) return next.value = t, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, e.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(e) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var t = this.tryEntries[0].completion;\n      if (\"throw\" === t.type) throw t.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(e) {\n      if (this.done) throw e;\n      var r = this;\n      function handle(n, o) {\n        return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o;\n      }\n      for (var o = this.tryEntries.length - 1; o >= 0; --o) {\n        var i = this.tryEntries[o],\n          a = i.completion;\n        if (\"root\" === i.tryLoc) return handle(\"end\");\n        if (i.tryLoc <= this.prev) {\n          var c = n.call(i, \"catchLoc\"),\n            u = n.call(i, \"finallyLoc\");\n          if (c && u) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          } else if (c) {\n            if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);\n          } else {\n            if (!u) throw Error(\"try statement without catch or finally\");\n            if (this.prev < i.finallyLoc) return handle(i.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(t, e) {\n      for (var r = this.tryEntries.length - 1; r >= 0; --r) {\n        var o = this.tryEntries[r];\n        if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) {\n          var i = o;\n          break;\n        }\n      }\n      i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);\n      var a = i ? i.completion : {};\n      return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a);\n    },\n    complete: function complete(t, e) {\n      if (\"throw\" === t.type) throw t.arg;\n      return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y;\n    },\n    finish: function finish(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;\n      }\n    },\n    \"catch\": function _catch(t) {\n      for (var e = this.tryEntries.length - 1; e >= 0; --e) {\n        var r = this.tryEntries[e];\n        if (r.tryLoc === t) {\n          var n = r.completion;\n          if (\"throw\" === n.type) {\n            var o = n.arg;\n            resetTryEntry(r);\n          }\n          return o;\n        }\n      }\n      throw Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(e, r, n) {\n      return this.delegate = {\n        iterator: values(e),\n        resultName: r,\n        nextLoc: n\n      }, \"next\" === this.method && (this.arg = t), y;\n    }\n  }, e;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","function asyncGeneratorStep(n, t, e, r, o, a, c) {\n  try {\n    var i = n[a](c),\n      u = i.value;\n  } catch (n) {\n    return void e(n);\n  }\n  i.done ? t(u) : Promise.resolve(u).then(r, o);\n}\nfunction _asyncToGenerator(n) {\n  return function () {\n    var t = this,\n      e = arguments;\n    return new Promise(function (r, o) {\n      var a = n.apply(t, e);\n      function _next(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n);\n      }\n      function _throw(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n);\n      }\n      _next(void 0);\n    });\n  };\n}\nexport { _asyncToGenerator as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export { default as extend } from './src/common/extend';\nexport * from './src/forum';\n"],"names":["ModelPath","str","nodes","data","endsWith","t","split","JSON","parse","map","n","ret","name","includes","_n$split","id","substring","length","_proto","prototype","toString","join","add","push","get","find","getId","node","getData","Extend","WebsocketAccessToken","Store","ItemList","WebsocketHelper","app","ws","context","lastSubscribes","getInstance","instance","init","start","_start","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_this","item","wrap","_callee$","_context","prev","next","onclose","close","undefined","store","createRecord","save","sent","WebSocket","url","closeHandler","onopen","reSubscribe","onmessage","e","type","messageHandler","path","stop","apply","arguments","console","log","stringify","_this2","setTimeout","getSubscribes","setContext","_this3","Object","keys","forEach","v","tempContext","newSub","assign","toArray","changed","send","sort","a","b","localeCompare","i","_WebsocketHelper","Model","_Model","_len","args","Array","_key","call","concat","token","attribute","replace","location","hostname","_inheritsLoose","default","showIf","judgement","vnode","def","extend","override","addSubscribeCb","cb","addMessageCb","orig","_path$get","initializers","window","navigation","addEventListener","event","Component","Button","Link","ComingDiscussion","_Component","view","m","className","translator","trans","attrs","list","count","href","route","near","post","title","onclick","NotificationFloater","_app$session","position","session","user","preferences","notifications","notification","attributes","contentType","cls","notificationComponents","first","dismiss","DiscussionList","initDiscussionList","items","discussionList","discussion","comingDiscussions","clearAll","redraw","addOne","baseCount","splice","unshift","pop","children","isArray","component","state","refresh","then","bind","initNotification","initPost","SettingsPage","FieldSet","Select","_app$session$user$unr","_app$session$user$new","model","pushPayload","obj","time","pushAttributes","unreadNotificationCount","newNotificationCount","ctr","$","addClass","appendTo","document","body","mount","setInterval","element","SELECT_FLOATER","label","options","value","onchange","savePreferences","DiscussionPage","_ref","current","routeName","stream","viewingEnd","relationships","posts","loadNext","r","_typeof","require","module","exports","__esModule","hasOwnProperty","o","defineProperty","Symbol","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","Generator","create","Context","makeInvokeMethod","tryCatch","arg","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","values","g","defineIteratorMethods","_invoke","AsyncIterator","invoke","resolve","__await","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","_sent","dispatchException","abrupt","TypeError","resultName","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","constructor","setPrototypeOf","__proto__","awrap","async","Promise","reverse","charAt","slice","rval","handle","complete","finish","_catch","delegateYield","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","asyncGeneratorStep","_next","_throw","_setPrototypeOf"],"sourceRoot":""}